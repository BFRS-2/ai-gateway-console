(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3618],{65020:function(e,l,n){Promise.resolve().then(n.bind(n,39840))},39840:function(e,l,n){"use strict";n.d(l,{UserManagementPage:function(){return el}});var s=n(57437),i=n(2265),t=n(88929),a=n(83719),r=n(48563),c=n(58013),o=n(89412),d=n(7999),h=n(15667),u=n(77699),x=n(10966);let m=[{id:"t1",name:"Trends"},{id:"t2",name:"Copilot"},{id:"t3",name:"API Platform"}],j=[{id:"p1",name:"AOV Insights",teamId:"t1"},{id:"p2",name:"Seller Care Voice",teamId:"t2"},{id:"p3",name:"Dockyard",teamId:"t3"}],Z=[{id:"u1",name:"Ashish Gupta",email:"ashish@shiprocket.com",roles:["Admin","Developer"],status:"active",lastActiveAt:"2025-09-30 10:05",accesses:[{type:"project",id:"p3",name:"Dockyard"},{type:"team",id:"t1",name:"Trends"}]},{id:"u2",name:"Priya Sharma",email:"priya@shiprocket.com",roles:["Developer"],status:"active",lastActiveAt:"2025-09-29 18:40",accesses:[{type:"project",id:"p1",name:"AOV Insights"}]},{id:"u3",name:"Rahul Verma",email:"rahul@shiprocket.com",roles:["Viewer","Compliance"],status:"blocked",lastActiveAt:"2025-09-26 11:16",accesses:[{type:"team",id:"t2",name:"Copilot"}]}];var p=n(92674),v=n(86645),g=n(74691),f=n(72853),C=n(48367),S=n(68884),k=n(57683),A=n(59575),b=n(94614),y=n(26980),w=n(57799),z=n(86917),P=n(47905),I=n(25792),T=n(87883),W=n(58467),E=n(95757),D=n(36033),O=n(64976),V=n(98272),M=n(49),N=n(76206),R=n(31293);let _=["Admin","Developer","Viewer","Finance","Compliance"];function U(e){let{user:l,open:n,onClose:r,onSave:c}=e,[o,u]=(0,i.useState)([]);(0,i.useEffect)(()=>{var e;u(null!==(e=null==l?void 0:l.roles)&&void 0!==e?e:[])},[l]);let x=e=>u(l=>l.includes(e)?l.filter(l=>l!==e):[...l,e]);return l?(0,s.jsx)(V.ZP,{anchor:"right",open:n,onClose:r,PaperProps:{sx:{width:420}},children:(0,s.jsxs)(d.Z,{sx:{p:2},children:[(0,s.jsx)(a.Z,{variant:"h6",children:"Edit Roles"}),(0,s.jsxs)(a.Z,{variant:"body2",color:"text.secondary",children:[l.name," • ",l.email]}),(0,s.jsxs)(t.Z,{spacing:1.5,sx:{mt:2},children:[(0,s.jsx)(a.Z,{variant:"subtitle2",children:"Current roles"}),(0,s.jsx)(t.Z,{direction:"row",spacing:1,flexWrap:"wrap",children:o.length?o.map(e=>(0,s.jsx)(k.Z,{size:"small",label:e},e)):(0,s.jsx)(a.Z,{variant:"caption",children:"None"})}),(0,s.jsx)(a.Z,{variant:"subtitle2",sx:{mt:1},children:"Assign roles"}),(0,s.jsx)(M.Z,{children:_.map(e=>(0,s.jsx)(N.Z,{control:(0,s.jsx)(R.Z,{checked:o.includes(e),onChange:()=>x(e)}),label:e},e))}),(0,s.jsxs)(t.Z,{direction:"row",spacing:1,sx:{mt:2},children:[(0,s.jsx)(h.Z,{variant:"contained",onClick:()=>c(o),children:"Save"}),(0,s.jsx)(h.Z,{variant:"outlined",onClick:r,children:"Cancel"})]})]})]})}):null}var F=n(40008),L=n(7547),B=n(7630);function G(e){let{user:l,open:n,onClose:r,onSave:u}=e,[x,Z]=(0,i.useState)([]),[p,v]=(0,i.useState)("team"),[g,f]=(0,i.useState)(""),[C,S]=(0,i.useState)("");(0,i.useEffect)(()=>{var e;Z(null!==(e=null==l?void 0:l.accesses)&&void 0!==e?e:[])},[l]);let A=(0,i.useMemo)(()=>g?j.filter(e=>e.teamId===g):j,[g]),y=e=>{Z(l=>l.filter((l,n)=>n!==e))};return l?(0,s.jsx)(V.ZP,{anchor:"right",open:n,onClose:r,PaperProps:{sx:{width:520}},children:(0,s.jsxs)(d.Z,{sx:{p:2},children:[(0,s.jsx)(a.Z,{variant:"h6",children:"Project/Team Access"}),(0,s.jsxs)(a.Z,{variant:"body2",color:"text.secondary",children:[l.name," • ",l.email]}),(0,s.jsxs)(t.Z,{spacing:2,sx:{mt:2},children:[(0,s.jsxs)(t.Z,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,s.jsxs)(c.Z,{select:!0,label:"Access Type",size:"small",value:p,onChange:e=>v(e.target.value),sx:{minWidth:160},children:[(0,s.jsx)(o.Z,{value:"team",children:"Team"}),(0,s.jsx)(o.Z,{value:"project",children:"Project"})]}),"team"===p&&(0,s.jsx)(c.Z,{select:!0,label:"Team",size:"small",value:g,onChange:e=>f(e.target.value),sx:{minWidth:220},children:m.map(e=>(0,s.jsx)(o.Z,{value:e.id,children:e.name},e.id))}),"project"===p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.Z,{select:!0,label:"Team",size:"small",value:g,onChange:e=>f(e.target.value),sx:{minWidth:160},children:[(0,s.jsx)(o.Z,{value:"",children:"All"}),m.map(e=>(0,s.jsx)(o.Z,{value:e.id,children:e.name},e.id))]}),(0,s.jsx)(c.Z,{select:!0,label:"Project",size:"small",value:C,onChange:e=>S(e.target.value),sx:{minWidth:220},children:A.map(e=>(0,s.jsx)(o.Z,{value:e.id,children:e.name},e.id))})]}),(0,s.jsx)(h.Z,{variant:"contained",onClick:()=>{if("team"===p&&g){let e=m.find(e=>e.id===g);x.find(l=>"team"===l.type&&l.id===e.id)||Z(l=>[...l,{type:"team",id:e.id,name:e.name}])}if("project"===p&&C){let e=j.find(e=>e.id===C);x.find(l=>"project"===l.type&&l.id===e.id)||Z(l=>[...l,{type:"project",id:e.id,name:e.name}])}},children:"Add"})]}),(0,s.jsx)(a.Z,{variant:"subtitle2",children:"Current Access"}),(0,s.jsx)(F.Z,{dense:!0,children:x.map((e,l)=>(0,s.jsx)(L.ZP,{secondaryAction:(0,s.jsx)(b.Z,{edge:"end",size:"small",onClick:()=>y(l),children:(0,s.jsx)(B.Z,{fontSize:"small"})}),children:(0,s.jsx)(P.Z,{primary:e.name,secondary:(0,s.jsx)(k.Z,{size:"small",label:e.type})})},"".concat(e.type,"-").concat(e.id)))}),(0,s.jsxs)(t.Z,{direction:"row",spacing:1,children:[(0,s.jsx)(h.Z,{variant:"contained",onClick:()=>u(x),children:"Save"}),(0,s.jsx)(h.Z,{variant:"outlined",onClick:r,children:"Cancel"})]})]})]})}):null}var Y=n(69065),q=n(80824),H=n(66124),J=n(23269),K=n(10843);function Q(e){let{open:l,title:n,description:i,onClose:t,onConfirm:a}=e;return(0,s.jsxs)(Y.Z,{open:l,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,s.jsx)(q.Z,{children:n}),i&&(0,s.jsx)(H.Z,{children:(0,s.jsx)(J.Z,{children:i})}),(0,s.jsxs)(K.Z,{children:[(0,s.jsx)(h.Z,{onClick:t,children:"Cancel"}),(0,s.jsx)(h.Z,{variant:"contained",color:"error",onClick:a,children:"Confirm"})]})]})}function X(e){let{rows:l}=e,[n,c]=(0,i.useState)(0),[d,h]=(0,i.useState)(10),[u,x]=(0,i.useState)(null),[m,j]=(0,i.useState)(null),[Z,V]=(0,i.useState)(null),[M,N]=(0,i.useState)(null),[R,_]=(0,i.useState)({open:!1,title:"",desc:"",onYes:()=>{}}),F=(0,i.useMemo)(()=>l.slice(n*d,n*d+d),[l,n,d]),L=(e,l)=>{x(e.currentTarget),j(l)},B=()=>{x(null),j(null)},Y=(e,l,n)=>_({open:!0,title:e,desc:l,onYes:n}),q=e=>Y("Delete user?","This will permanently remove ".concat(e.name,"."),()=>console.log("delete",e.id)),H=e=>Y("".concat("active"===e.status?"Block":"Unblock"," user?"),"".concat(e.name," will be ").concat("active"===e.status?"blocked":"unblocked","."),()=>console.log("blockToggle",e.id));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.Z,{variant:"outlined",children:[(0,s.jsx)(p.Z,{children:(0,s.jsxs)(v.Z,{size:"small",children:[(0,s.jsx)(g.Z,{children:(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(C.Z,{children:"Name"}),(0,s.jsx)(C.Z,{children:"Email"}),(0,s.jsx)(C.Z,{children:"Roles"}),(0,s.jsx)(C.Z,{children:"Status"}),(0,s.jsx)(C.Z,{children:"Last Active"}),(0,s.jsx)(C.Z,{align:"right",children:"Actions"})]})}),(0,s.jsxs)(S.Z,{children:[F.map(e=>{var l;return(0,s.jsxs)(f.Z,{hover:!0,children:[(0,s.jsx)(C.Z,{children:e.name}),(0,s.jsx)(C.Z,{children:e.email}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(t.Z,{direction:"row",spacing:.5,flexWrap:"wrap",children:e.roles.map(e=>(0,s.jsx)(k.Z,{size:"small",label:e},e))})}),(0,s.jsx)(C.Z,{children:(0,s.jsx)(k.Z,{size:"small",label:e.status,color:"active"===e.status?"success":"default",variant:"outlined"})}),(0,s.jsx)(C.Z,{children:null!==(l=e.lastActiveAt)&&void 0!==l?l:"-"}),(0,s.jsx)(C.Z,{align:"right",children:(0,s.jsx)(A.Z,{title:"More",children:(0,s.jsx)(b.Z,{size:"small",onClick:l=>L(l,e),children:(0,s.jsx)(I.Z,{fontSize:"small"})})})})]},e.id)}),0===F.length&&(0,s.jsx)(f.Z,{children:(0,s.jsx)(C.Z,{colSpan:6,children:(0,s.jsx)(a.Z,{variant:"body2",color:"text.secondary",children:"No users found"})})})]})]})}),(0,s.jsx)(y.Z,{component:"div",count:l.length,page:n,onPageChange:(e,l)=>c(l),rowsPerPage:d,onRowsPerPageChange:e=>{h(parseInt(e.target.value,10)),c(0)},rowsPerPageOptions:[10,25,50]})]}),(0,s.jsxs)(w.Z,{open:!!u,anchorEl:u,onClose:B,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,s.jsxs)(o.Z,{onClick:()=>{V(m),B()},children:[(0,s.jsx)(z.Z,{children:(0,s.jsx)(D.Z,{fontSize:"small"})}),(0,s.jsx)(P.Z,{children:"Edit roles"})]}),(0,s.jsxs)(o.Z,{onClick:()=>{N(m),B()},children:[(0,s.jsx)(z.Z,{children:(0,s.jsx)(O.Z,{fontSize:"small"})}),(0,s.jsx)(P.Z,{children:"Give / Revoke access"})]}),(0,s.jsxs)(o.Z,{onClick:()=>{m&&H(m),B()},children:[(0,s.jsx)(z.Z,{children:(null==m?void 0:m.status)==="active"?(0,s.jsx)(W.Z,{fontSize:"small"}):(0,s.jsx)(E.Z,{fontSize:"small"})}),(0,s.jsx)(P.Z,{children:(null==m?void 0:m.status)==="active"?"Block":"Unblock"})]}),(0,s.jsxs)(o.Z,{onClick:()=>{m&&q(m),B()},sx:{color:"error.main"},children:[(0,s.jsx)(z.Z,{children:(0,s.jsx)(T.Z,{fontSize:"small",color:"error"})}),(0,s.jsx)(P.Z,{children:"Delete"})]})]}),(0,s.jsx)(U,{user:Z,open:!!Z,onClose:()=>V(null),onSave:e=>{console.log("save roles",null==Z?void 0:Z.id,e),V(null)}}),(0,s.jsx)(G,{user:M,open:!!M,onClose:()=>N(null),onSave:e=>{console.log("save access",null==M?void 0:M.id,e),N(null)}}),(0,s.jsx)(Q,{open:R.open,title:R.title,description:R.desc,onClose:()=>_({...R,open:!1}),onConfirm:()=>{R.onYes(),_({...R,open:!1})}})]})}let $=["All","Admin","Developer","Viewer","Finance","Compliance"],ee=["All","active","blocked"];function el(){let[e,l]=(0,i.useState)(""),[n,m]=(0,i.useState)("All"),[j,p]=(0,i.useState)("All"),v=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,[n,s]=(0,i.useState)(e);return(0,i.useEffect)(()=>{let n=setTimeout(()=>s(e),l);return()=>clearTimeout(n)},[e,l]),n}(e,300),g=(0,i.useMemo)(()=>{let e=v.trim().toLowerCase();return Z.filter(l=>{let s=!e||l.name.toLowerCase().includes(e)||l.email.toLowerCase().includes(e),i="All"===n||l.roles.includes(n),t="All"===j||l.status===j;return s&&i&&t})},[v,n,j]);return(0,s.jsxs)(t.Z,{spacing:2,children:[(0,s.jsx)(a.Z,{variant:"h4",children:"User Management"}),(0,s.jsx)(r.Z,{variant:"outlined",sx:{p:2},children:(0,s.jsxs)(t.Z,{direction:{xs:"column",md:"row"},spacing:2,alignItems:{xs:"stretch",md:"center"},children:[(0,s.jsx)(c.Z,{fullWidth:!0,placeholder:"Search by name or email",value:e,onChange:e=>l(e.target.value),InputProps:{startAdornment:(0,s.jsx)(u.Z,{fontSize:"small",sx:{mr:1,opacity:.6}})},size:"small"}),(0,s.jsx)(c.Z,{select:!0,label:"Role",size:"small",value:n,onChange:e=>m(e.target.value),sx:{minWidth:160},children:$.map(e=>(0,s.jsx)(o.Z,{value:e,children:e},e))}),(0,s.jsx)(c.Z,{select:!0,label:"Status",size:"small",value:j,onChange:e=>p(e.target.value),sx:{minWidth:160},children:ee.map(e=>(0,s.jsx)(o.Z,{value:e,children:e},e))}),(0,s.jsx)(d.Z,{flex:1}),(0,s.jsx)(h.Z,{variant:"contained",startIcon:(0,s.jsx)(x.Z,{}),children:"Invite User"})]})}),(0,s.jsx)(X,{rows:g})]})}}},function(e){e.O(0,[7797,1432,2139,8127,7359,9741,7714,5769,7547,2614,2971,7023,1744],function(){return e(e.s=65020)}),_N_E=e.O()}]);