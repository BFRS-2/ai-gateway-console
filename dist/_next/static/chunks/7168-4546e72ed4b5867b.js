"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7168],{32385:function(e,i,l){var t=l(59625),r=l(19478),a=l(53205);let n="/api/v1/usage/organization",o="/api/v1/usage";i.Z={create:e=>(0,r.yn)(t.Z.GET_PROJECTS,e),getAll:()=>(0,r.Xt)(t.Z.PROJECTS),getByOrganization:e=>(0,r.Xt)("".concat(t.Z.GET_PROJECTS,"/by-organization?organization_id=").concat(encodeURIComponent(e))),getUsage:e=>(0,r.Xt)("".concat(t.Z.PROJECT_USAGE)+(0,a.Z)(e)),getProjectServices:e=>(0,r.Xt)("".concat(t.Z.PROJECT_SERVICES,"/").concat(e,"/services")),getOrgUsageGroupedByProject:(e,i,l)=>(0,r.Xt)("".concat(n,"/").concat(encodeURIComponent(e),"?group_by=project&start_date=").concat(encodeURIComponent(i),"&end_date=").concat(encodeURIComponent(l))),getOrgUsageGroupedByService:(e,i,l)=>(0,r.Xt)("".concat(n,"/").concat(encodeURIComponent(e),"?group_by=service&start_date=").concat(encodeURIComponent(i),"&end_date=").concat(encodeURIComponent(l))),getProjectUsageViaOrg:(e,i,l,t)=>(0,r.Xt)("".concat(n,"/").concat(encodeURIComponent(e),"?project_id=").concat(encodeURIComponent(i),"&start_date=").concat(encodeURIComponent(l),"&end_date=").concat(encodeURIComponent(t))),getOrgDaywise:(e,i,l)=>(0,r.Xt)("".concat(o,"?scope=org&organization_id=").concat(encodeURIComponent(e),"&type=daywise&start_date=").concat(encodeURIComponent(i),"&end_date=").concat(encodeURIComponent(l))),getProjectMTD:e=>(0,r.Xt)("".concat(o,"?scope=project&project_id=").concat(encodeURIComponent(e),"&type=mtd")),getProjectDetails:e=>(0,r.Xt)("/api/v1/projects?project_id=".concat(encodeURIComponent(e))),updatePoject:e=>(0,r.Ww)("/api/v1/projects/update",e),addNewApiKey:(e,i)=>(0,r.yn)("/api/v1/projects/".concat(encodeURIComponent(e),"/api-key/generate"),null!=i?i:{}),deleteApiKey:(e,i)=>(0,r.yn)("/api/v1/projects/".concat(encodeURIComponent(e),"/api-key/delete"),{api_key:i})}},93379:function(e,i,l){l.d(i,{L:function(){return o}});var t=l(57437),r=l(2265),a=l(13139),n=l(7999);let o=(0,r.forwardRef)((e,i)=>{let{slotProps:l,children:r,fillContent:o,naturalScroll:d,sx:s,...c}=e;return(0,t.jsx)(n.Z,{component:a.Z,scrollableNodeProps:{ref:i},clickOnTrack:!1,className:"mnl__scrollbar__root",sx:{minWidth:0,minHeight:0,flexGrow:1,display:"flex",flexDirection:"column","& .simplebar-wrapper":null==l?void 0:l.wrapper,"& .simplebar-content-wrapper":null==l?void 0:l.contentWrapper,"& .simplebar-content":{...o&&{minHeight:1,display:"flex",flex:"1 1 auto",flexDirection:"column"},...null==l?void 0:l.content},...s},...c,children:r})})},47168:function(e,i,l){l.d(i,{ServicesPage:function(){return Y}});var t=l(57437),r=l(2265),a=l(22960),n=l(32804),o=l(88929),d=l(83719),s=l(48563),c=l(58013),p=l(89412),m=l(58433),u=l(7999),g=l(98272),f=l(94614),v=l(7630),x=l(77699),y=l(70270),h=l(27573),b=l(94696),j=l(76206),_=l(78975),Z=l(57683),w=l(15667),C=l(61287),k=l(4247),S=l(71287),P=l(59625),A=l(19478),T=l(53205),E={getAllServices:e=>(0,A.Xt)(P.Z.GET_ALL_SERVICES+(0,T.Z)({project_id:e})),getAllModels:()=>(0,A.Xt)(P.Z.GET_ALL_MODELS),getAllProviders:()=>(0,A.Xt)(P.Z.GET_ALL_PROVIDERS)};let M={default_model:"gpt-4o",backup_model:"gpt-4o-mini",default_provider:"openai",backup_provider:"openai"},R={inference:{service:"inference",title:"Configure Inference",ui:{containerStyle:{width:"70vw",maxWidth:"1100px",margin:"0 auto",padding:"16px 0 32px"},formStyle:{display:"flex",flexDirection:"column",gap:"20px"},fieldStyle:{minWidth:0},groups:[{id:"models",title:"Model & Provider",description:"Choose primary, backup and allowed models.",fields:["config.default_model","config.backup_model","config.default_provider","config.backup_provider","config.allowed_models"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"generation",title:"Generation Settings",description:"Control output style.",fields:["config.system_prompt","config.temperature","config.max_tokens"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"limits",title:"Usage Limits",description:"Rate-limit this service.",fields:["limits.daily","limits.monthly","enabled"],style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"16px"}}]},initial:{service:"inference",config:{...M,allowed_models:[],system_prompt:"You are a helpful assistant that provides accurate and helpful responses.",temperature:.7,max_tokens:1e3},limits:{daily:100,monthly:300},enabled:!0},fields:{"config.default_model":{label:"Default Model",type:"dropdown",required:!0,dynamic:"models"},"config.backup_model":{label:"Backup Model",type:"dropdown",required:!0,dynamic:"models"},"config.default_provider":{label:"Default Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.backup_provider":{label:"Backup Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.allowed_models":{label:"Allowed Models",type:"multiselect",dynamic:"models"},"config.system_prompt":{label:"System Prompt",type:"textarea"},"config.temperature":{label:"Temperature",type:"slider",min:0,max:2,step:.1,required:!0},"config.max_tokens":{label:"Max Tokens",type:"number",min:1,max:2e5,required:!0},"limits.daily":{label:"Daily Limit",type:"number",min:0,required:!0},"limits.monthly":{label:"Monthly Limit",type:"number",min:0,required:!0},enabled:{label:"Enabled",type:"switch"}}},summarization:{service:"summarization",title:"Configure Summarization",ui:{containerStyle:{width:"70vw",maxWidth:"1100px",margin:"0 auto",padding:"16px 0 32px"},formStyle:{display:"flex",flexDirection:"column",gap:"20px"},groups:[{id:"models",title:"Model & Provider",fields:["config.default_model","config.backup_model","config.default_provider","config.backup_provider","config.allowed_models"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"generation",title:"Summarization Settings",fields:["config.system_prompt","config.temperature","config.max_tokens"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"limits",title:"Usage Limits",fields:["limits.daily","limits.monthly","enabled"],style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"16px"}}]},initial:{service:"summarization",config:{...M,allowed_models:[],system_prompt:"You are a helpful assistant that creates concise summaries.",temperature:.7,max_tokens:1e3},limits:{daily:100,monthly:300},enabled:!0},fields:{"config.default_model":{label:"Default Model",type:"dropdown",required:!0,dynamic:"models"},"config.backup_model":{label:"Backup Model",type:"dropdown",required:!0,dynamic:"models"},"config.default_provider":{label:"Default Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.backup_provider":{label:"Backup Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.allowed_models":{label:"Allowed Models",type:"multiselect",dynamic:"models"},"config.system_prompt":{label:"System Prompt",type:"textarea"},"config.temperature":{label:"Temperature",type:"slider",min:0,max:2,step:.1},"config.max_tokens":{label:"Max Tokens",type:"number",min:1,max:2e5},"limits.daily":{label:"Daily Limit",type:"number",min:0,required:!0},"limits.monthly":{label:"Monthly Limit",type:"number",min:0,required:!0},enabled:{label:"Enabled",type:"switch"}}},embedding:{service:"embedding",title:"Configure Embedding",ui:{containerStyle:{width:"70vw",maxWidth:"1100px",margin:"0 auto",padding:"16px 0 32px"},formStyle:{display:"flex",flexDirection:"column",gap:"20px"},groups:[{id:"models",title:"Model & Provider",fields:["config.default_model","config.backup_model","config.default_provider","config.backup_provider","config.allowed_models"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"embedding",title:"Embedding Settings",fields:["config.max_tokens"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"limits",title:"Usage Limits",fields:["limits.daily","limits.monthly","enabled"],style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"16px"}}]},initial:{service:"embedding",config:{...M,allowed_models:[],max_tokens:8191},limits:{daily:1e3,monthly:1e4},enabled:!0},fields:{"config.default_model":{label:"Default Model",type:"dropdown",required:!0,dynamic:"models"},"config.backup_model":{label:"Backup Model",type:"dropdown",required:!0,dynamic:"models"},"config.default_provider":{label:"Default Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.backup_provider":{label:"Backup Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.allowed_models":{label:"Allowed Models",type:"multiselect",dynamic:"models"},"config.max_tokens":{label:"Max Tokens",type:"number",min:1,max:2e5},"limits.daily":{label:"Daily Limit",type:"number",min:0,required:!0},"limits.monthly":{label:"Monthly Limit",type:"number",min:0,required:!0},enabled:{label:"Enabled",type:"switch"}}},ocr:{service:"ocr",title:"Configure OCR",ui:{containerStyle:{width:"70vw",maxWidth:"1100px",margin:"0 auto",padding:"16px 0 32px"},formStyle:{display:"flex",flexDirection:"column",gap:"20px"},groups:[{id:"models",title:"Model & Provider",fields:["config.default_model","config.backup_model","config.default_provider","config.backup_provider","config.allowed_models"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"ocr",title:"OCR Settings",fields:["config.max_tokens","config.supported_formats"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"limits",title:"Usage Limits",fields:["limits.daily","limits.monthly","enabled"],style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"16px"}}]},initial:{service:"ocr",config:{...M,allowed_models:[],max_tokens:4096,supported_formats:["image/jpeg","image/png","application/pdf"]},limits:{daily:50,monthly:1e3},enabled:!0},fields:{"config.default_model":{label:"Default Model",type:"dropdown",required:!0,dynamic:"models"},"config.backup_model":{label:"Backup Model",type:"dropdown",required:!0,dynamic:"models"},"config.default_provider":{label:"Default Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.backup_provider":{label:"Backup Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.allowed_models":{label:"Allowed Models",type:"multiselect",dynamic:"models"},"config.max_tokens":{label:"Max Tokens",type:"number",min:1,max:2e5},"config.supported_formats":{label:"Supported Formats",type:"chips"},"limits.daily":{label:"Daily Limit",type:"number",min:0,required:!0},"limits.monthly":{label:"Monthly Limit",type:"number",min:0,required:!0},enabled:{label:"Enabled",type:"switch"}}},chatbot:{service:"chatbot",title:"Configure Chatbot",ui:{containerStyle:{width:"70vw",maxWidth:"1100px",margin:"0 auto",padding:"16px 0 32px"},formStyle:{display:"flex",flexDirection:"column",gap:"20px"},groups:[{id:"models",title:"Model & Provider",fields:["config.default_model","config.backup_model","config.default_provider","config.backup_provider","config.allowed_models"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"bot",title:"Bot Behaviour",fields:["config.system_prompt","config.temperature"],style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"}},{id:"limits",title:"Usage Limits",fields:["limits.daily","limits.monthly","enabled"],style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"16px"}}]},initial:{service:"chatbot",config:{...M,allowed_models:[],system_prompt:"You are a helpful AI assistant that provides accurate and helpful responses based on the knowledge base.",temperature:.7},limits:{daily:100,monthly:300},enabled:!0},fields:{"config.default_model":{label:"Default Model",type:"dropdown",required:!0,dynamic:"models"},"config.backup_model":{label:"Backup Model",type:"dropdown",required:!0,dynamic:"models"},"config.default_provider":{label:"Default Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.backup_provider":{label:"Backup Provider",type:"dropdown",required:!0,dynamic:"providers"},"config.allowed_models":{label:"Allowed Models",type:"multiselect",dynamic:"models"},"config.system_prompt":{label:"System Prompt",type:"textarea"},"config.temperature":{label:"Temperature",type:"slider",min:0,max:2,step:.1},"limits.daily":{label:"Daily Limit",type:"number",min:0,required:!0},"limits.monthly":{label:"Monthly Limit",type:"number",min:0,required:!0},enabled:{label:"Enabled",type:"switch"}}}};var q=l(60346),D=l(94893),I=l(55677),L=l(93379);function z(e,i){return i.split(".").reduce((e,i)=>e?e[i]:void 0,e)}function U(e,i,l){let t=i.split("."),r={...e},a=r;return t.forEach((e,i)=>{if(i===t.length-1)a[e]=l;else{var r;a[e]={...null!==(r=a[e])&&void 0!==r?r:{}},a=a[e]}}),r}function W(e){var i,l,a,n,s,m;let{schema:g,serviceKey:f,models:v,providers:x,value:y,onChange:h,onSubmit:b,submitLabel:C="Save & Activate"}=e,[k,S]=(0,r.useState)({}),P=(0,r.useMemo)(()=>(v||[]).filter(e=>(null==e?void 0:e.status)==="active"&&Array.isArray(e.allowed_services)&&e.allowed_services.includes(f)).map(e=>({label:e.name,value:e.name,provider:e.provider})),[v,f]),A=(0,r.useMemo)(()=>(x||[]).filter(e=>(null==e?void 0:e.status)==="active").map(e=>({label:e.name,value:e.name})),[x]);(0,r.useEffect)(()=>{let e=(e,i)=>{let l=z(y,e),t=z(y,i);if(!l)return;let r=P.find(e=>e.value===l);r&&!t&&h(U(y,i,r.provider))};e("config.default_model","config.default_provider"),e("config.backup_model","config.backup_provider")},[null==y?void 0:null===(i=y.config)||void 0===i?void 0:i.default_model,null==y?void 0:null===(l=y.config)||void 0===l?void 0:l.backup_model,P]);let T=e=>{var i;return(null===(i=e.options)||void 0===i?void 0:i.length)?e.options:"models"===e.dynamic?P.map(e=>{let{label:i,value:l}=e;return{label:i,value:l}}):"providers"===e.dynamic?A:[]},E=()=>{let e={};return Object.entries(g.fields).forEach(i=>{let[l,t]=i,r=z(y,l);t.required&&(null==r||""===r||Array.isArray(r)&&0===r.length)&&(e[l]="".concat(t.label||l," is required")),"number"===t.type&&null!=r&&(null!=t.min&&r<t.min&&(e[l]="".concat(t.label||l," must be ≥ ").concat(t.min)),null!=t.max&&r>t.max&&(e[l]="".concat(t.label||l," must be ≤ ").concat(t.max))),"slider"===t.type&&null!=r&&(null!=t.min&&r<t.min&&(e[l]="".concat(t.label||l," must be ≥ ").concat(t.min)),null!=t.max&&r>t.max&&(e[l]="".concat(t.label||l," must be ≤ ").concat(t.max)))}),S(e),0===Object.keys(e).length},M=(e,i)=>{var l,r,a,n,s,m,g,f,v,x,b,w,C,S;let P=z(y,e),A=i.label||e.split(".").slice(-1)[0],E=T(i);switch(i.type){case"text":return(0,t.jsx)(c.Z,{fullWidth:!0,size:"small",label:A,placeholder:i.placeholder,value:null!==(l=null!=P?P:i.default)&&void 0!==l?l:"",onChange:i=>h(U(y,e,i.target.value)),error:!!k[e],helperText:k[e]});case"textarea":return(0,t.jsxs)(u.Z,{sx:{gridColumn:"1 / -1"},children:[" ",(0,t.jsx)(c.Z,{fullWidth:!0,size:"small",label:A,placeholder:i.placeholder,value:null!==(r=null!=P?P:i.default)&&void 0!==r?r:"",onChange:i=>h(U(y,e,i.target.value)),error:!!k[e],helperText:k[e],multiline:!0,minRows:3})]});case"number":return(0,t.jsx)(c.Z,{fullWidth:!0,size:"small",label:A,type:"number",inputProps:{min:i.min,max:i.max,step:null!==(a=i.step)&&void 0!==a?a:1},value:null!==(n=null!=P?P:i.default)&&void 0!==n?n:"",onChange:i=>h(U(y,e,Number(i.target.value))),error:!!k[e],helperText:k[e]});case"switch":return(0,t.jsx)(j.Z,{control:(0,t.jsx)(_.Z,{checked:!!(null!==(s=null!=P?P:i.default)&&void 0!==s&&s),onChange:(i,l)=>h(U(y,e,l))}),label:A});case"slider":let M=e.includes("temperature"),R=M?0:null!==(m=i.min)&&void 0!==m?m:0,L=M?1:null!==(g=i.max)&&void 0!==g?g:1,W=null!==(f=i.step)&&void 0!==f?f:M?.01:.1;return(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)(d.Z,{variant:"caption",sx:{fontWeight:600},children:[A,": ",(0,t.jsx)("b",{children:null!==(v=null!=P?P:i.default)&&void 0!==v?v:0})]}),(0,t.jsx)(q.ZP,{size:"small",value:Number(null!==(x=null!=P?P:i.default)&&void 0!==x?x:0),min:R,max:L,step:W,onChange:(i,l)=>h(U(y,e,l))}),k[e]&&(0,t.jsx)(d.Z,{variant:"caption",color:"error",children:k[e]})]});case"dropdown":return(0,t.jsx)(c.Z,{select:!0,fullWidth:!0,size:"small",label:A,value:null!==(b=null!=P?P:i.default)&&void 0!==b?b:"",onChange:i=>h(U(y,e,i.target.value)),error:!!k[e],helperText:k[e],children:E.map(e=>(0,t.jsx)(p.Z,{value:e.value,children:e.label},e.value))});case"multiselect":return(0,t.jsx)(D.Z,{multiple:!0,fullWidth:!0,displayEmpty:!0,value:null!==(w=null!=P?P:i.default)&&void 0!==w?w:[],input:(0,t.jsx)(I.Z,{size:"small"}),onChange:i=>h(U(y,e,i.target.value)),renderValue:e=>0===e.length?(0,t.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:A}):(0,t.jsx)(o.Z,{direction:"row",gap:1,flexWrap:"wrap",children:e.map(e=>(0,t.jsx)(Z.Z,{label:e,size:"small"},e))}),size:"small",children:E.map(e=>(0,t.jsx)(p.Z,{value:e.value,children:e.label},e.value))});case"chips":return(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(d.Z,{variant:"caption",sx:{fontWeight:600},children:A}),(0,t.jsx)(o.Z,{direction:"row",gap:1,flexWrap:"wrap",sx:{my:1},children:(Array.isArray(P)?P:null!==(C=i.default)&&void 0!==C?C:[]).map((i,l)=>(0,t.jsx)(Z.Z,{label:i,onDelete:()=>{h(U(y,e,(Array.isArray(P)?P:[]).filter(e=>e!==i)))},size:"small"},"".concat(i,"-").concat(l)))}),(0,t.jsx)(c.Z,{size:"small",placeholder:"Type & press Enter",onKeyDown:i=>{if("Enter"===i.key){i.preventDefault();let l=i.target.value.trim();l&&(h(U(y,e,[...Array.isArray(P)?P:[],l])),i.target.value="")}},fullWidth:!0}),k[e]&&(0,t.jsx)(d.Z,{variant:"caption",color:"error",children:k[e]})]});default:return(0,t.jsx)(c.Z,{fullWidth:!0,size:"small",label:A,value:null!==(S=null!=P?P:i.default)&&void 0!==S?S:"",onChange:i=>h(U(y,e,i.target.value))})}},R=null!==(s=null===(a=g.ui)||void 0===a?void 0:a.groups)&&void 0!==s?s:[],W=new Set;R.forEach(e=>e.fields.forEach(e=>W.add(e)));let O=Object.entries(g.fields).filter(e=>{let[i]=e;return!W.has(i)}),B=null!==(m=null===(n=g.ui)||void 0===n?void 0:n.containerStyle)&&void 0!==m?m:{width:"70vw",maxWidth:"1100px",margin:"0 auto",padding:"16px 0 32px"};return(0,t.jsx)(L.L,{children:(0,t.jsx)(u.Z,{sx:B,children:(0,t.jsxs)(o.Z,{spacing:3,children:[(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(d.Z,{variant:"h6",children:g.title}),(0,t.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"Update configuration for this service."})]}),R.length>0&&R.map(e=>(0,t.jsxs)(u.Z,{sx:{p:2.5,borderRadius:2,bgcolor:"background.paper",boxShadow:"0 6px 18px rgba(0,0,0,0.03)",display:"flex",flexDirection:"column",gap:2},children:[(0,t.jsxs)(u.Z,{children:[e.title&&(0,t.jsx)(d.Z,{variant:"subtitle1",sx:{mb:.5},children:e.title}),e.description&&(0,t.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:e.description})]}),(0,t.jsx)(u.Z,{sx:{display:"grid",gap:2,gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",...e.style||{}},children:e.fields.map(e=>{let i=g.fields[e];return i?(0,t.jsx)(u.Z,{sx:{minWidth:0},children:M(e,i)},e):null})})]},e.id)),O.length>0&&(0,t.jsxs)(u.Z,{sx:{p:2.5,borderRadius:2,bgcolor:"background.paper",boxShadow:"0 6px 18px rgba(0,0,0,0.03)"},children:[(0,t.jsx)(d.Z,{variant:"subtitle1",sx:{mb:1.5},children:"Other settings"}),(0,t.jsx)(u.Z,{sx:{display:"grid",gap:2,gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:O.map(e=>{let[i,l]=e;return(0,t.jsx)(u.Z,{children:M(i,l)},i)})})]}),(0,t.jsx)(o.Z,{direction:"row",justifyContent:"flex-end",children:(0,t.jsx)(w.Z,{variant:"contained",onClick:()=>{E()&&b()},children:C})})]})})})}var O={addToProject:(e,i)=>(0,A.yn)("".concat(P.Z.PROJECTS).concat(e,"/services"),i),updateService:(e,i)=>(0,A.Ww)("".concat(P.Z.PROJECTS).concat(e,"/services"),i)},B=l(11444),X=l(55041);function N(e,i){if(!i)return structuredClone(e);let l=(e,i)=>{if(Array.isArray(e))return Array.isArray(i)?i:e;if(e&&"object"==typeof e){let t=Array.isArray(e)?[]:{...e};for(let r of Object.keys(e))t[r]=l(e[r],null==i?void 0:i[r]);if(i&&"object"==typeof i)for(let e of Object.keys(i))e in t||(t[e]=i[e]);return t}return null!=i?i:e};return l(e,i)}function G(e){var i,l,s,c;let{service:p,onOpen:m,onToggle:x,onSaveConfig:P,savedConfig:A,projectId:T}=e,M=(0,a.Z)(),q=(0,n.Z)(M.breakpoints.down("md")),D=(p.name||"").toLowerCase().trim(),I=R[D],[L,z]=(0,r.useState)(!1),[U,G]=(0,r.useState)(()=>I?structuredClone(I.initial):{}),[J,K]=(0,r.useState)([]),[V,Y]=(0,r.useState)([]),[F,H]=(0,r.useState)(!1);(0,B.v9)(e=>e.orgProject.selectedOrganizationProject);let Q=T||"",{enqueueSnackbar:$}=(0,X.Ds)(),ee=()=>{var e,i;return I?A&&(null===(i=A.service)||void 0===i?void 0:null===(e=i.toLowerCase)||void 0===e?void 0:e.call(i))===D?N(I.initial,{service:A.service,config:A.config,limits:A.limits,enabled:A.enabled}):structuredClone(I.initial):{}},ei=()=>{G(ee()),z(!0)},el=e=>{if(e){if(!I){console.error('No schema for service "'.concat(D,'"'));return}ei();return}x(p,!1)};(0,r.useEffect)(()=>{L&&(H(!0),Promise.all([E.getAllModels(),E.getAllProviders()]).then(e=>{var i,l,t,r;let[a,n]=e,o=null!==(t=null==a?void 0:null===(i=a.data)||void 0===i?void 0:i.models)&&void 0!==t?t:[],d=null!==(r=null==n?void 0:null===(l=n.data)||void 0===l?void 0:l.providers)&&void 0!==r?r:[];K(Array.isArray(o)?o:[]),Y(Array.isArray(d)?d:[])}).finally(()=>H(!1)))},[L]);let et=async()=>{if(!Q){$("No project selected",{variant:"warning"});return}(p.is_active?O.updateService:O.addToProject)(Q,{...U,service_id:p.id}).then(async e=>{var i,l,t,r,a;if(null==e?void 0:e.success){$("Service configuration saved",{variant:"success"});let l=null!==(i=null==e?void 0:e.data)&&void 0!==i?i:{service:D,config:U.config,limits:U.limits,enabled:!0};I&&G(N(I.initial,l)),await P(),x(p,!0),z(!1)}else{let i=Object.keys((null==e?void 0:null===(t=e.error)||void 0===t?void 0:null===(l=t.payload)||void 0===l?void 0:l.errors)||{});Array.isArray(i)&&i.length?i.forEach(i=>{var l,t,r;$((null===(r=e.error)||void 0===r?void 0:null===(t=r.payload)||void 0===t?void 0:null===(l=t.errors)||void 0===l?void 0:l[i])||"Error saving service configuration",{variant:"error"})}):$((null==e?void 0:null===(a=e.error)||void 0===a?void 0:null===(r=a.payload)||void 0===r?void 0:r.message)||"Error saving service configuration",{variant:"error"})}}).catch(e=>{console.error("Error saving service configuration:",e),$("Error saving service configuration",{variant:"error"})})};return I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(y.Z,{variant:"outlined",sx:{height:"100%"},children:[(0,t.jsx)(h.Z,{title:p.name,subheader:p.description,action:(0,t.jsx)(j.Z,{control:(0,t.jsx)(_.Z,{checked:p.is_active,onChange:(e,i)=>el(i)}),label:p.is_active?"Enabled":"Disabled"})}),(0,t.jsxs)(b.Z,{children:[(0,t.jsxs)(o.Z,{direction:"row",spacing:1,flexWrap:"wrap",sx:{mb:2},children:[null==p?void 0:null===(i=p.models)||void 0===i?void 0:i.slice(0,3).map(e=>(0,t.jsx)(Z.Z,{label:e.displayName,size:"small",variant:"outlined"},e.id)),(null==p?void 0:null===(l=p.models)||void 0===l?void 0:l.length)>3&&(0,t.jsx)(Z.Z,{size:"small",label:"+".concat(((null==p?void 0:null===(s=p.models)||void 0===s?void 0:s.length)||0)-3," models")})]}),(0,t.jsxs)(d.Z,{variant:"caption",color:"text.secondary",children:["Use cases: ",null==p?void 0:null===(c=p.useCases)||void 0===c?void 0:c.join(" • ")]}),(0,t.jsxs)(o.Z,{direction:"row",spacing:1,sx:{mt:2},children:[(0,t.jsx)(w.Z,{size:"small",variant:"contained",endIcon:(0,t.jsx)(k.Z,{}),onClick:()=>m(p),children:"Open Docs"}),(0,t.jsx)(w.Z,{size:"small",variant:"outlined",startIcon:(0,t.jsx)(S.Z,{}),onClick:ei,children:"Configure"})]})]})]}),(0,t.jsxs)(g.ZP,{anchor:"right",open:L,onClose:()=>z(!1),PaperProps:{sx:{width:q?"100%":"77vw",maxWidth:"100%"}},children:[(0,t.jsxs)(u.Z,{sx:{p:2,borderBottom:1,borderColor:"divider",display:"flex",justifyContent:"space-between",alignItems:"center",gap:1},children:[(0,t.jsxs)(d.Z,{variant:"h6",children:["Configure: ",p.name]}),(0,t.jsx)(f.Z,{onClick:()=>z(!1),children:(0,t.jsx)(v.Z,{})})]}),(0,t.jsx)(u.Z,{sx:{p:2,overflowY:"auto"},children:F?(0,t.jsxs)(o.Z,{alignItems:"center",justifyContent:"center",sx:{py:6},children:[(0,t.jsx)(C.Z,{}),(0,t.jsx)(d.Z,{variant:"body2",sx:{mt:2},children:"Loading models & providers…"})]}):(0,t.jsx)(W,{schema:I,serviceKey:D,models:J,providers:V,value:U,onChange:G,onSubmit:et,submitLabel:"Save & Activate"})})]})]}):(0,t.jsxs)(y.Z,{variant:"outlined",children:[(0,t.jsx)(h.Z,{title:p.name,subheader:p.description}),(0,t.jsx)(b.Z,{children:(0,t.jsxs)(d.Z,{variant:"body2",color:"error",children:["Missing schema for “",p.name,"”. Ensure serviceSchemas has a “",D,"” key."]})})]})}var J=l(32385);let K=["All","ocr","summarization","embeddings","voice","chatbot"],V=["All","enabled","disabled"];function Y(e){let{projectId:i}=e,l=(0,a.Z)(),y=(0,n.Z)(l.breakpoints.down("md")),[h,b]=(0,r.useState)(""),[j,_]=(0,r.useState)("All"),[Z,w]=(0,r.useState)("All"),[C,k]=(0,r.useState)(null),[S,P]=(0,r.useState)([]),[A,T]=(0,r.useState)([]),M=i||"",R=()=>{M&&E.getAllServices(M).then(e=>{e.success?P(e.data.services):P([])})},q=()=>{M&&J.Z.getProjectServices(M).then(e=>{e.success?T(e.data.services):T([])})};(0,r.useEffect)(()=>{M?(R(),q()):(P([]),T([]))},[M]);let D=(0,r.useMemo)(()=>{let e=h.trim().toLowerCase();return S.filter(i=>{let l=!e||i.name.toLowerCase().includes(e)||i.description.toLowerCase().includes(e),t="All"===Z||("enabled"===Z?i.is_active:!i.is_active);return l&&t})},[S,h,j,Z]),I=(e,i)=>{P(l=>l.map(l=>l.id===e.id?{...l,is_active:i}:l))};return(0,t.jsxs)(o.Z,{spacing:2,children:[(0,t.jsx)(d.Z,{variant:"h4",children:"Services"}),(0,t.jsx)(s.Z,{variant:"outlined",sx:{p:2},children:(0,t.jsxs)(o.Z,{direction:{xs:"column",md:"row"},spacing:2,alignItems:{xs:"stretch",md:"center"},children:[(0,t.jsx)(c.Z,{fullWidth:!0,placeholder:"Search services",value:h,onChange:e=>b(e.target.value),size:"small",InputProps:{startAdornment:(0,t.jsx)(x.Z,{fontSize:"small",sx:{mr:1,opacity:.6}})}}),(0,t.jsx)(c.Z,{select:!0,size:"small",label:"Kind",value:j,onChange:e=>_(e.target.value),sx:{minWidth:200},children:K.map(e=>(0,t.jsx)(p.Z,{value:e,children:e},e))}),(0,t.jsx)(c.Z,{select:!0,size:"small",label:"Status",value:Z,onChange:e=>w(e.target.value),sx:{minWidth:200},children:V.map(e=>(0,t.jsx)(p.Z,{value:e,children:e},e))})]})}),(0,t.jsxs)(m.ZP,{container:!0,spacing:2,children:[D.map(e=>(0,t.jsx)(m.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,t.jsx)(G,{projectId:i,service:e,onOpen:e=>k(e),onToggle:I,onSaveConfig:()=>{R(),q()},savedConfig:A.find(i=>i.service_id===e.id)})},e.id)),0===D.length&&(0,t.jsx)(u.Z,{sx:{p:4},children:(0,t.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:M?"No services found":"Select a project to view services"})})]}),(0,t.jsxs)(g.ZP,{anchor:"right",open:!!C,onClose:()=>k(null),PaperProps:{sx:{width:y?"100%":"70vw",maxWidth:"100%"}},children:[(0,t.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:1,borderColor:"divider"},children:[(0,t.jsx)(d.Z,{variant:"h6",children:(null==C?void 0:C.name)||"Service details"}),(0,t.jsx)(f.Z,{onClick:()=>k(null),children:(0,t.jsx)(v.Z,{})})]}),(0,t.jsx)(u.Z,{sx:{p:2,height:"100%",overflowY:"auto"},children:C?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(d.Z,{variant:"subtitle2",sx:{mb:1},children:C.description})}):null})]})]})}},53205:function(e,i,l){l.d(i,{Z:function(){return t}});function t(e){let i=new URLSearchParams;for(let t in e)if(e.hasOwnProperty(t)){var l;e[t]&&i.append(t,null===(l=e[t])||void 0===l?void 0:l.toString())}return"?".concat(i.toString().replace(/\+/g,"%20"))}}}]);